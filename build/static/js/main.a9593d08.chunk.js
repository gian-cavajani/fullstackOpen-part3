(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),u=t(16),a=t.n(u),i=t(7),o=t(3),r=t(0),l=function(e){var n=e.addPerson,t=e.handleChangeName,c=e.newName,u=e.newNum,a=e.handleChangeNum;return Object(r.jsxs)("article",{children:[" ",Object(r.jsxs)("form",{onSubmit:n,children:["name: ",Object(r.jsx)("input",{type:"text",onChange:t,value:c}),"number: ",Object(r.jsx)("input",{type:"text",onChange:a,value:u}),Object(r.jsx)("button",{type:"submit",children:"add"})]})]})},s=function(e){var n=e.filterName,t=e.handleChangeFilt,c=e.newFilt,u=e.handleShowAll;return Object(r.jsxs)("article",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsxs)("form",{onSubmit:n,children:["filter people:",Object(r.jsx)("input",{type:"text",onChange:t,value:c}),Object(r.jsx)("button",{type:"submit",children:"filter"})]}),Object(r.jsx)("button",{onClick:u,children:"show all"})]})},j=function(e){var n=e.names,t=e.remove;return Object(r.jsxs)("li",{children:[Object(r.jsx)("span",{children:"Name:"})," ",n.name,", ",Object(r.jsx)("span",{children:"Number:"})," ",n.number,Object(r.jsx)("button",{onClick:t,children:"delete"})]})},b=function(e){var n=e.menssage;return null===n?null:"ERROR"===n?Object(r.jsx)("div",{className:"error",children:Object(r.jsx)("p",{children:n})}):Object(r.jsx)("div",{className:"message",children:Object(r.jsx)("p",{children:n})})},d=t(4),h=t.n(d),f="/api/persons",m=function(){return h.a.get(f).then((function(e){return e.data}))},O=function(e){return h.a.post(f,e).then((function(e){return e.data}))},p=function(e){return h.a.delete("".concat(f,"/").concat(e))},x=function(e,n){return h.a.put("".concat(f,"/").concat(e),n)},v=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],a=Object(c.useState)(""),d=Object(o.a)(a,2),h=d[0],f=d[1],v=Object(c.useState)(""),g=Object(o.a)(v,2),w=g[0],N=g[1],R=Object(c.useState)(""),C=Object(o.a)(R,2),S=C[0],k=C[1],y=Object(c.useState)(!0),E=Object(o.a)(y,2),T=E[0],F=E[1],A=Object(c.useState)(null),P=Object(o.a)(A,2),D=P[0],J=P[1];Object(c.useEffect)((function(){m().then((function(e){u(e)}))}),[]);var B=T?t:t.filter((function(e){return e.name===S}));return Object(r.jsxs)("section",{children:[Object(r.jsx)(b,{menssage:D}),Object(r.jsx)(s,{filterName:function(e){e.preventDefault(),F(!1)},handleChangeFilt:function(e){k(e.target.value)},newFilt:S,handleShowAll:function(){F(!0)}}),Object(r.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:h,number:w},c=t.find((function(e){return e.name===n.name}));if(c){var a=Object(i.a)(Object(i.a)({},c),{},{number:w});console.log(a),window.confirm("".concat(h," is already on the list, would you like to update the number?"))&&x(c.id,a).then((function(e){u(t.map((function(n){return n.id!==c.id?n:e.data}))),J("".concat(a.name," number updated to: ").concat(a.number)),setTimeout((function(){J(null)}),3e3)})).catch((function(e){J("ERROR"),setTimeout((function(){J(null)}),3e3)}))}else O(n).then((function(e){u(t.concat(e)),J("Added ".concat(n.name)),setTimeout((function(){J(null)}),3e3)})).catch((function(e){J("ERROR"),setTimeout((function(){J(null)}),3e3)}));f(""),N("")},handleChangeName:function(e){f(e.target.value)},newName:h,newNum:w,handleChangeNum:function(e){N(e.target.value)}}),Object(r.jsx)("h2",{children:"numbers: "}),Object(r.jsx)("ul",{children:B.map((function(e){return Object(r.jsx)(j,{names:e,remove:function(){return function(e){var n=t.filter((function(n){return n.id===e}));window.confirm("remove ".concat(n[0].name,"?"))&&p(e).then((function(){u(t.filter((function(n){return n.id!==e})))})).catch((function(e){J("ERROR"),setTimeout((function(){J(null)}),3e3)}))}(e.id)}},e.id)}))})]})};t(41);a.a.render(Object(r.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a9593d08.chunk.js.map